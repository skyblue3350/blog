+++
author = "すかい"
title = "The ship Remasterでサーバーを建てる"
date = "2018-10-02"
description = "The ship Remasterでサーバーを建てる"
tags = [
    "Game",
]
+++

## はじめに

今更ながらに購入して遊びました．

身内で遊ぶためにサーバーを建てたのですがぼちぼち詰まったので備忘録として残しておきます．
今の所Winしか提供されていないようなので他のプラットフォームで動かしたい時は頑張るしかなさそう．

## 手段

サーバーファイルを落としてきて使う
https://steamcommunity.com/linkfilter/?url=https://s3-eu-west-1.amazonaws.com/bgdownloads/Remasted+Dedicated.zip
で配布されているサーバーファイルを落としてきて使う（↑参考ページのところにあるリンクです）
がsteamconsole.dllがないとかで進まないのでひとまず諦め．

## ゲーム内でCreate Serverしてみる

一番最初にこれを試しけどうまくいかなかった．
ただUDP開けずに試してた気がするのでTCP/UDP両方開ければいけるのかもしれない．
また機会があれば試します．

## Steam上で動かす

試した中でこれが一番確実でした
ただSteamクライアントが当該機に入っていてゲームを購入している必要あり．

Steamクライアント -> ライブラリ -> ツール からThe Ship: Remasted Dedicated Serverをダウンロード
右クリックしてプロパティ -> ローカルファイル -> ローカルファイルを閲覧を選択
TSRDS_1ディレクトリ下にserver.cfgがあるので良しなに設定する

ルーターでserver.cfg上で定義したポートの前後のポートのTCP/UDPを開放する．
SteamクライアントからThe Ship: Remasted Dedicated Serverを起動する．

SteamクライアントからThe Ship: Remastedを起動してゲーム内のJoinからサーバー一覧を見ると出てくる．
らしいが出てこない．
サーバーだけ別PCで動かしてみるとか色々試したけどダメ．
どうも同一ネットワーク上で動作していると出てこないっぽい（身内からは見れるし入れるとのこと）

The shipと同様にSteamクライアント -> 表示 -> サーバー -> お気に入りから127.0.0.1:設定したポート+1を追加すると一応動作しているのは確認できる．
ゲームを起動した状態でゲームに参加を押すとゲーム側でロードが始まり入れたっぽい雰囲気を醸し出すが入れない．

The shipの様にコンソール（JSキーボードで半角全角/USキーボードで:）からconnectコマンドが使えれば良いがどうもないっぽい．

入れない原因はサーバーのホスト名がグローバルIPになってるからっぽい気がする．
が変更する手段がないようなので今回は諦めてとても強引だがサーバーを別PCで動かし自分だけVPNで入った．

NATループバックするようにすればいける気はする．
旧作の方が色々楽だったなぁ…というのが正直な感想

## 参考サイト

- [Setting up your own Dedicated Server](https://steamcommunity.com/app/383790/discussions/0/358415738212914430/)
