<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Selenium on メモ帳</title><link>/tags/selenium/</link><description>Recent content in Selenium on メモ帳</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><lastBuildDate>Wed, 11 Apr 2018 00:00:00 +0000</lastBuildDate><atom:link href="/tags/selenium/index.xml" rel="self" type="application/rss+xml"/><item><title>Seleniumあれこれ</title><link>/post/selenium%E3%81%82%E3%82%8C%E3%81%93%E3%82%8C/</link><pubDate>Wed, 11 Apr 2018 00:00:00 +0000</pubDate><guid>/post/selenium%E3%81%82%E3%82%8C%E3%81%93%E3%82%8C/</guid><description>はじめに Seleniumでちょっとあれこれした時のメモ
インストール 各種ドライバは環境に合わせて落とす
1$ pip install selenium 2$ wget https://chromedriver.storage.googleapis.com/2.37/chromedriver_win32.zip 3$ unzip chromedriver_win32.zip 今回の要件 スクロールに合わせてコンテンツが読み込まれていくタイプのページで何が読み込まれていったのか知りたい
自動でスクロールさせる SeleniumでJSを実行させることができるのでJSを流し込んでスクロールさせます
1from selenium import webdriver 23driver = webdriver.Chrome() 4driver.get(&amp;#34;http://example.com&amp;#34;) 5cmd = &amp;#34;document.querySelector(\&amp;#34;.example_class\&amp;#34;).scrollTo(0, 100);&amp;#34;) 6driver.execute_script(cmd) コンテンツの高さを取得する 同じくjsを実行して取得します
returnすると値をPython側でもらうことができます
1from selenium import webdriver 23driver = webdriver.Chrome() 4driver.get(&amp;#34;http://example.com&amp;#34;) 5cmd = &amp;#34;return document.querySelector(\&amp;#34;.example_class\&amp;#34;).scrollHeight;&amp;#34;) 6height = driver.execute_script(cmd) バックグラウンドでアクセスしたページを調べる SeleniumはChromeのみPerformanceへのアクセスができるみたいなのでこれを使います
いろいろデータが取れるので各自確認していただきたいですがコンテンツの取得が完了した際に「Network.responseReceived」というmethodが呼ばれるみたいなのでこれを捕まえます
1from selenium import webdriver 2from selenium.webdriver.common.desired_capabilities import DesiredCapabilities 34caps = DesiredCapabilities.CHROME 5caps[&amp;#34;loggingPrefs&amp;#34;] = {&amp;#34;performance&amp;#34;: &amp;#34;ALL&amp;#34;} 6driver = webdriver.Chrome(desired_capabilities=caps) 78driver.</description></item></channel></rss>